<div class="max-w-2xl mx-auto my-12 p-5">
  <h1 class="text-2xl font-bold mb-4">Create New Room</h1>

  <% if @error %>
    <div class="text-red-600 my-2"><%= @error %></div>
  <% end %>

  <form method="post" action="/rooms">
    <div class="my-2">
      <label for="name" class="block mb-1">Room Name:</label>
      <input type="text" autocomplete="off" id="name" name="name" required class="p-1 w-80 border border-terminal-green-500 border-2">
    </div>
    <div class="my-2">
      <label for="description" class="block mb-1">Description (optional):</label>
      <textarea id="description" name="description" rows="3" class="p-1 w-80 border border-terminal-green-500 border-2"></textarea>
    </div>
    <div class="my-2">
      <label for="game_master_id" class="block mb-1">Game Master:</label>
      <select id="game_master_id" name="game_master_id" class="p-1 w-80 border border-terminal-green-500">
        <% @users.each do |user| %>
          <option value="<%= user[:id] %>" <%= user[:id] == @current_user[:id] ? 'selected' : '' %>>
            <%= user[:username] %><%= user[:is_ai] ? ' (AI)' : '' %>
          </option>
        <% end %>
      </select>
    </div>
    <div class="my-2">
      <label for="world_template_id" class="block mb-1">World Template (optional):</label>
      <select id="world_template_id" name="world_template_id" class="p-1 w-80 border border-terminal-green-500">
        <option value="">None - Start with empty world</option>
        <% @world_templates.each do |world| %>
          <option value="<%= world.id %>">
            <%= world.name %> (<%= world.locations.count %> locations)
          </option>
        <% end %>
      </select>
      <% if @world_templates.any? %>
        <p class="text-sm text-gray-400 mt-1">
          <a href="/worlds/builder" class="text-green-400 hover:text-green-300">Manage templates</a>
        </p>
      <% else %>
        <p class="text-sm text-gray-400 mt-1">
          <a href="/worlds/builder/new" class="text-green-400 hover:text-green-300">Create your first world template</a>
        </p>
      <% end %>
    </div>
    <div class="my-5">
      <%= submit_button('Create Room') %>
      <a href="/" class="ml-2 py-2 px-5 bg-red-600 text-white no-underline hover:bg-red-700 inline-block">Cancel</a>
    </div>
  </form>
</div>
